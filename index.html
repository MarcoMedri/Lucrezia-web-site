<!DOCTYPE html>
<html lang="en">
  <head>
    <!--  -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Library -->
    <link
      rel="stylesheet"
      media="screen and (max-width: 700px)"
      href="smallscreen.css"
    />
    -->
    <link rel="stylesheet" href="main.css" />
    <!--CSS style -->
    <script type="text/javascript" src="js_Site.js"></script>
    <!-- javascript -->

    <title>Lulu</title>
  </head>

  <!-- Global Site Tag (gtag.js) - Google Analytics -->
  <script
    async
    src="https://www.googletagmanager.com/gtag/js?id=UA-135086153-1"
  ></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "UA-135086153-1");
  </script>
  <!-- Google Anaystics  -->

  <body>
    <script>
      function getLocation() {
        if ("geolocation" in navigator) {
          let geo = navigator.geolocation;
          geo.getCurrentPosition(showPosition, function error(err) {
            console.warn(`ERROR(${err.code}): ${err.message}`);
            document.location.href = "en/index.html";
            return;
          });
        } else {
          // There is no Geolacation embedded in the browser
          document.location.href = "en/index.html";
        }
      }

      function showPosition(position) {
        getAddress(position.coords.latitude, position.coords.longitude);
      }

      function getAddress(x, y) {
        var geocoder = new google.maps.Geocoder();
        var infowindow = new google.maps.InfoWindow();
        var latlng = { lat: x, lng: y };
        geocoder.geocode({ location: latlng }, function(results, status) {
          if (status === "OK") {
            if (results[0]) {
              switch (results[0].address_components[5].short_name) {
                // TODO implement all the other pages!!!!
                /*  case "FR": 
                  document.location.href = "fr/index.html";
                  break;
                case "IT":
                  document.location.href = "it/index.html";
                  break; */
                default:
                  document.location.href = "en/index.html";
                  break;
              }
            } else {
              document.location.href = "en/index.html";
            }
          } else {
            document.location.href = "en/index.html";
          }
        });
      }
    </script>

    <!-- This is for having the google API activated -->
    <script
      async
      defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAnsHoIfljiBHvkBydXxh5i4HRhC9SzUYk&callback=getLocation"
    ></script>
  </body>
</html>
